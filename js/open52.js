function findType(e){let t={m3u8:"application/x-mpegURL",mp3:"audio/mpeg",aac:"audio/aac",mp4:"video/mp4",flac:"audio/flac",mov:"video/mp4",mkv:"video/x-matroska",ogv:"video/ogg",opus:"video/ogg",m4v:"video/mp4",m4a:"audio/mp4",caf:"audio/x-caf",oga:"audio/ogg",wav:"audio/wav",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},i,o=(e=e.split("?")[0]).lastIndexOf(".");if(-1!==o&&t[i=e.substr(o+1)])return[i,t[i]];for(let l in o=e.lastIndexOf("/"),i=e.substr(o+1),t)if(-1!==i.indexOf(l))return[l,t[l]];for(let a in t)if(-1!==e.indexOf(a))return[a,t[a]];return["mp3",t.mp3]}function file_get_contents(e){let t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText}function getUrl(e=null){e||(e=window.location.search.substring(1));let t=null,i=null,o="video",l=null,a=null,n=null,p,s,c,d,m,v,r;e.startsWith("v=")&&(e=e.substring(2)),e||document.write("<html><script>parent.close();</script></html>"),void 0!=(m=e.split("+")[1])&&(a=m);let u,g;if(r=e.split("+")[0]){if(r.includes("/")||(u=e.split("+")[1],"yt"==(g=e=r)&&(g="youtube"),"dm"==g&&(g="dailymotion"),"tw"==g&&(g="twitch"),"vm"==g&&(g="vimeo"),"fb"!=g||(g="facebook")),!u||!g){var f=d=decodeURIComponent(e);c=d.split("?")[1],d=d.split("?")[0],s={},void 0!==c&&c.split("&").forEach(function(e){let t=e.split("=");s[t[0]]=t[1]});let h=d.indexOf("//");-1!==h&&(h+=2,d=d.substr(h));g=(r=(p=d.split("/"))[0].split(".")).pop(),g=r.pop()+"."+g}switch(g){case"youtu.be":u=p[1];case"youtube":case"youtube.com":void 0==u&&((r=s.v)&&(u=r),(r=s.list)&&(v=!0,u=void 0!=u?"watch?v="+u+"&list="+r:"playlist?list="+r),void 0==u&&(r=p[2],"0"!==p[1]?("streams"===r&&(r=p[1]),(r=file_get_contents("https://tvradiozap.eu/tools/yt.id.php/"+r)).length>3&&(u=r)):u=r)),void 0!=u?(l="https://www.youtube.com/embed/"+u+(v?"&autoplay=1":"?autoplay=1"),i="yt"):(l="/im/tvrz16-9.png",n="Unknown Youtube url");break;case"dai.ly":u=p[1];case"dailymotion":case"dailymotion.com":void 0==u&&(u="video"==p[p.length-2]?p[p.length-1]:s.video),void 0!=u?(l="https://www.dailymotion.com/embed/video/"+u+"?autoplay=true",i="dl"):n="Unknown Dailymotion url";break;case"vimeo":case"vimeo.com":if(void 0==u){let w=(u=p[p.length-1]).split("-");"clip"==w[0]&&(u=w[1])}isNaN(Number(u))?n="Unknown Vimeo url":(l="https://player.vimeo.com/video/"+u+"?autoplay=1",i="vm");break;case"twitch":case"twitch.tv":https:void 0==u&&(u=s.channel);void 0==u&&(u=p[p.length-1]),void 0!=u?(l="https://player.twitch.tv/?channel="+u+"&parent=tvradiozap.free.fr",i="tw"):n="Unknown Twitch url";break;case"myvideoplace":case"myvideoplace.tv":void 0==u&&s.v&&(u=s.v.split("&")[0]),void 0==u&&(-1===(u=p[p.length-1].slice(0,-5)).indexOf("_PAD_")&&(u=p[p.length-2]),(r=u.split("_")).splice(4),u=r.join("_")),void 0!=u?(l="https://player.myvideoplace.tv/?v="+u+"&template=C07012",i="mv"):n="Unknown MyVideoplace url";break;case"canalplus":case"canalplus.com":l=void 0!=u?d:"https://www.canalplus.com/live/?channel="+u;break;case"facebook":case"facebook.com":l=void 0!=u?d:"https://www.facebook.com/plugins/video.php?href="+e;break;default:i=(r=findType(e))[0],t=r[1],l="/tools/play52.html?"+e,o="application/x-mpegURL"==t?"hls":"application/dash+xml"==t?"dash":t.split("/")[0]}}else n="Url absente";return{av:o,typeUrl:i,mimeType:t,url:f,newUrl:decodeURIComponent(l),newUrl2:a,messErr:n}}